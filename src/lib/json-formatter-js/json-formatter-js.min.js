var JSONFormatter=(function(){var DATE_STRING_REGEX=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/;var PARTIAL_DATE_REGEX=/\d{2}:\d{2}:\d{2} GMT-\d{4}/;var JSON_DATE_REGEX=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;var MAX_ANIMATED_TOGGLE_ITEMS=10;var requestAnimationFrame=window.requestAnimationFrame||function(cb){cb();return 0};var _defaultConfig={hoverPreviewEnabled:!1,hoverPreviewArrayCount:100,hoverPreviewFieldCount:5,animateOpen:!0,animateClose:!0,theme:null,};function JSONFormatter(json,open,config,key){if(open===void 0){open=1}
if(config===void 0){config=_defaultConfig}
this.json=json;this.open=open;this.config=config;this.key=key;this._isOpen=null;if(this.config.hoverPreviewEnabled===undefined){this.config.hoverPreviewEnabled=_defaultConfig.hoverPreviewEnabled}
if(this.config.hoverPreviewArrayCount===undefined){this.config.hoverPreviewArrayCount=_defaultConfig.hoverPreviewArrayCount}
if(this.config.hoverPreviewFieldCount===undefined){this.config.hoverPreviewFieldCount=_defaultConfig.hoverPreviewFieldCount}}
Object.defineProperty(JSONFormatter.prototype,'isOpen',{get:function(){if(this._isOpen!==null){return this._isOpen}else{return this.open>0}},set:function(value){this._isOpen=value},enumerable:!0,configurable:!0,});Object.defineProperty(JSONFormatter.prototype,'isDate',{get:function(){return(this.type==='string'&&(DATE_STRING_REGEX.test(this.json)||JSON_DATE_REGEX.test(this.json)||PARTIAL_DATE_REGEX.test(this.json)))},enumerable:!0,configurable:!0,});Object.defineProperty(JSONFormatter.prototype,'isUrl',{get:function(){return this.type==='string'&&this.json.indexOf('http')===0},enumerable:!0,configurable:!0,});Object.defineProperty(JSONFormatter.prototype,'isArray',{get:function(){return Array.isArray(this.json)},enumerable:!0,configurable:!0,});Object.defineProperty(JSONFormatter.prototype,'isObject',{get:function(){return isObject(this.json)},enumerable:!0,configurable:!0,});Object.defineProperty(JSONFormatter.prototype,'isEmptyObject',{get:function(){return!this.keys.length&&!this.isArray},enumerable:!0,configurable:!0,});Object.defineProperty(JSONFormatter.prototype,'isEmpty',{get:function(){return(this.isEmptyObject||(this.keys&&!this.keys.length&&this.isArray))},enumerable:!0,configurable:!0,});Object.defineProperty(JSONFormatter.prototype,'hasKey',{get:function(){return typeof this.key!=='undefined'},enumerable:!0,configurable:!0,});Object.defineProperty(JSONFormatter.prototype,'constructorName',{get:function(){return getObjectName(this.json)},enumerable:!0,configurable:!0,});Object.defineProperty(JSONFormatter.prototype,'type',{get:function(){return getType(this.json)},enumerable:!0,configurable:!0,});Object.defineProperty(JSONFormatter.prototype,'keys',{get:function(){if(this.isObject){return Object.keys(this.json).map(function(key){return key?key:'""'})}else{return[]}},enumerable:!0,configurable:!0,});JSONFormatter.prototype.toggleOpen=function(){this.isOpen=!this.isOpen;if(this.element){if(this.isOpen){this.appendChildren(this.config.animateOpen)}else{this.removeChildren(this.config.animateClose)}
this.element.classList.toggle(cssClass('open'))}};JSONFormatter.prototype.openAtDepth=function(depth){if(depth===void 0){depth=1}
if(depth<0){return}
this.open=depth;this.isOpen=depth!==0;if(this.element){this.removeChildren(!1);if(depth===0){this.element.classList.remove(cssClass('open'))}else{this.appendChildren(this.config.animateOpen);this.element.classList.add(cssClass('open'))}}};JSONFormatter.prototype.getInlinepreview=function(){var _this=this;if(this.isArray){if(this.json.length>this.config.hoverPreviewArrayCount){return 'Array['+this.json.length+']'}else{return '['+this.json.map(getPreview).join(', ')+']'}}else{var keys=this.keys;var narrowKeys=keys.slice(0,this.config.hoverPreviewFieldCount);var kvs=narrowKeys.map(function(key){return key+':'+getPreview(_this.json[key])});var ellipsis=keys.length>=this.config.hoverPreviewFieldCount?'…':'';return '{'+kvs.join(', ')+ellipsis+'}'}};JSONFormatter.prototype.render=function(){this.element=createElement('div','row');var togglerLink=createElement('a','toggler-link');if(this.isObject){togglerLink.appendChild(createElement('span','toggler'))}
if(this.hasKey){togglerLink.appendChild(createElement('span','key',this.key+':'))}
if(this.isObject){var value=createElement('span','value');var objectWrapperSpan=createElement('span');var constructorName=createElement('span','constructor-name',this.constructorName);objectWrapperSpan.appendChild(constructorName);if(this.isArray){var arrayWrapperSpan=createElement('span');arrayWrapperSpan.appendChild(createElement('span','bracket','['));arrayWrapperSpan.appendChild(createElement('span','number',this.json.length));arrayWrapperSpan.appendChild(createElement('span','bracket',']'));objectWrapperSpan.appendChild(arrayWrapperSpan)}
value.appendChild(objectWrapperSpan);togglerLink.appendChild(value)}else{var value=this.isUrl?createElement('a'):createElement('span');value.classList.add(cssClass(this.type));if(this.isDate){value.classList.add(cssClass('date'))}
if(this.isUrl){value.classList.add(cssClass('url'));value.setAttribute('href',this.json)}
var valuePreview=getValuePreview(this.json,this.json);value.appendChild(document.createTextNode(valuePreview));togglerLink.appendChild(value)}
if(this.isObject&&this.config.hoverPreviewEnabled){var preview=createElement('span','preview-text');preview.appendChild(document.createTextNode(this.getInlinepreview()));togglerLink.appendChild(preview)}
var children=createElement('div','children');if(this.isObject){children.classList.add(cssClass('object'))}
if(this.isArray){children.classList.add(cssClass('array'))}
if(this.isEmpty){children.classList.add(cssClass('empty'))}
if(this.config&&this.config.theme){this.element.classList.add(cssClass(this.config.theme))}
if(this.isOpen){this.element.classList.add(cssClass('open'))}
this.element.appendChild(togglerLink);this.element.appendChild(children);if(this.isObject&&this.isOpen){this.appendChildren()}
if(this.isObject){togglerLink.addEventListener('click',this.toggleOpen.bind(this))}
return this.element};JSONFormatter.prototype.appendChildren=function(animated){var _this=this;if(animated===void 0){animated=!1}
var children=this.element.querySelector('div.'+cssClass('children'));if(!children||this.isEmpty){return}
if(animated){var index_1=0;var addAChild_1=function(){var key=_this.keys[index_1];var formatter=new JSONFormatter(_this.json[key],_this.open-1,_this.config,key);children.appendChild(formatter.render());index_1+=1;if(index_1<_this.keys.length){if(index_1>MAX_ANIMATED_TOGGLE_ITEMS){addAChild_1()}else{requestAnimationFrame(addAChild_1)}}};requestAnimationFrame(addAChild_1)}else{this.keys.forEach(function(key){var formatter=new JSONFormatter(_this.json[key],_this.open-1,_this.config,key);children.appendChild(formatter.render())})}};JSONFormatter.prototype.removeChildren=function(animated){if(animated===void 0){animated=!1}
var childrenElement=this.element.querySelector('div.'+cssClass('children'));if(animated){var childrenRemoved_1=0;var removeAChild_1=function(){if(childrenElement&&childrenElement.children.length){childrenElement.removeChild(childrenElement.children[0]);childrenRemoved_1+=1;if(childrenRemoved_1>MAX_ANIMATED_TOGGLE_ITEMS){removeAChild_1()}else{requestAnimationFrame(removeAChild_1)}}};requestAnimationFrame(removeAChild_1)}else{if(childrenElement){childrenElement.innerHTML=''}}};function escapeString(str){return str.replace('"','"')}
function isObject(value){var type=typeof value;return!!value&&type=='object'}
function getObjectName(object){if(object===undefined){return ''}
if(object===null){return 'Object'}
if(typeof object==='object'&&!object.constructor){return 'Object'}
var funcNameRegex=/function ([^(]*)/;var results=funcNameRegex.exec(object.constructor.toString());if(results&&results.length>1){return results[1]}else{return ''}}
function getType(object){if(object===null){return 'null'}
return typeof object}
function getValuePreview(object,value){var type=getType(object);if(type==='null'||type==='undefined'){return type}
if(type==='string'){value='"'+escapeString(value)+'"'}
if(type==='function'){return(object.toString().replace(/[\r\n]/g,'').replace(/\{.*\}/,'')+'{…}')}
return value}
function getPreview(object){var value='';if(isObject(object)){value=getObjectName(object);if(Array.isArray(object))value+='['+object.length+']'}else{value=getValuePreview(object,object)}
return value}
function cssClass(className){return 'json-formatter-'+className}
function createElement(type,className,content){var el=document.createElement(type);if(className){el.classList.add(cssClass(className))}
if(content!==undefined){if(content instanceof Node){el.appendChild(content)}else{el.appendChild(document.createTextNode(String(content)))}}
return el}
return JSONFormatter})()